# =============================================================================
# Ryumem Configuration Template
# Copy this file to .env and fill in your actual values
# =============================================================================

# =============================================================================
# API Keys (DO NOT commit actual keys to git!)
# =============================================================================

# OpenAI API Key (required if using OpenAI for LLM or embeddings)
# OPENAI_API_KEY=sk-your-openai-api-key-here

# Google API Key (required if using Gemini for LLM or embeddings)
GOOGLE_API_KEY=your-google-api-key-here

# NOTE: You can use either OpenAI, Gemini, or both:
# - OpenAI only: Set OPENAI_API_KEY, use RYUMEM_LLM_PROVIDER=openai
# - Gemini only: Set GOOGLE_API_KEY, use RYUMEM_LLM_PROVIDER=gemini (auto-configures embeddings)
# - Mixed: Set both keys, use OpenAI for embeddings (better quality) and your choice for LLM

# =============================================================================
# Database Configuration
# =============================================================================

# Path to the ryugraph database directory
RYUMEM_DB_PATH=./data/ryumem.db

# Open database in read-only mode (allows concurrent access, no writes)
RYUMEM_READ_ONLY=false

# =============================================================================
# LLM Provider Configuration
# =============================================================================

# LLM provider: openai, ollama, or gemini
RYUMEM_LLM_PROVIDER=gemini

# LLM model to use
# OpenAI: gpt-4o-mini, gpt-4o, gpt-4, gpt-3.5-turbo
# Ollama: llama3.2:3b, llama3.1:8b, etc.
# Gemini: gemini-2.0-flash-exp, gemini-1.5-pro, etc.
RYUMEM_LLM_MODEL=gemini-2.0-flash-exp

# Ollama server URL (only needed if using Ollama)
RYUMEM_LLM_OLLAMA_BASE_URL=http://localhost:11434

# LLM timeout in seconds
RYUMEM_LLM_TIMEOUT_SECONDS=180

# Maximum retries for LLM API calls
RYUMEM_LLM_MAX_RETRIES=3

# =============================================================================
# LLM Temperature Settings (0.0 = deterministic, 2.0 = very creative)
# =============================================================================

# Temperature for entity extraction
RYUMEM_LLM_ENTITY_EXTRACTION_TEMPERATURE=0.3

# Temperature for relationship extraction
RYUMEM_LLM_RELATION_EXTRACTION_TEMPERATURE=0.3

# Temperature for community summary generation
RYUMEM_LLM_COMMUNITY_SUMMARY_TEMPERATURE=0.3

# Temperature for tool output summarization
RYUMEM_LLM_TOOL_SUMMARIZATION_TEMPERATURE=0.3

# =============================================================================
# LLM Max Tokens Settings
# =============================================================================

# Maximum tokens for entity extraction responses
RYUMEM_LLM_ENTITY_EXTRACTION_MAX_TOKENS=2000

# Maximum tokens for relationship extraction responses
RYUMEM_LLM_RELATION_EXTRACTION_MAX_TOKENS=2000

# Maximum tokens for community summaries
RYUMEM_LLM_COMMUNITY_SUMMARY_MAX_TOKENS=200

# Maximum tokens for tool output summaries
RYUMEM_LLM_TOOL_SUMMARIZATION_MAX_TOKENS=100

# =============================================================================
# Embedding Configuration
# =============================================================================

# Embedding provider: openai or gemini
# Note: If you set RYUMEM_LLM_PROVIDER=gemini, this will auto-configure to gemini
RYUMEM_EMBEDDING_PROVIDER=gemini

# Embedding model
# OpenAI: text-embedding-3-large, text-embedding-3-small, text-embedding-ada-002
# Gemini: text-embedding-004
RYUMEM_EMBEDDING_MODEL=text-embedding-004

# Embedding dimensions (must match model)
# text-embedding-3-large: 3072
# text-embedding-3-small: 1536
# text-embedding-ada-002: 1536
# text-embedding-004: 768
RYUMEM_EMBEDDING_DIMENSIONS=768

# Batch size for embedding operations
RYUMEM_EMBEDDING_BATCH_SIZE=100

# Embedding timeout in seconds
RYUMEM_EMBEDDING_TIMEOUT_SECONDS=180

# =============================================================================
# Entity Extraction Configuration
# =============================================================================

# Enable entity extraction during ingestion (disabled by default to reduce token usage)
RYUMEM_ENTITY_ENABLED=false

# Cosine similarity threshold for entity deduplication (0.0-1.0)
RYUMEM_ENTITY_ENTITY_SIMILARITY_THRESHOLD=0.65

# Cosine similarity threshold for relationship deduplication (0.0-1.0)
RYUMEM_ENTITY_RELATIONSHIP_SIMILARITY_THRESHOLD=0.8

# Maximum number of previous episodes to use as context for extraction
RYUMEM_ENTITY_MAX_CONTEXT_EPISODES=5

# =============================================================================
# Search Configuration
# =============================================================================

# Default number of search results to return
RYUMEM_SEARCH_DEFAULT_LIMIT=10

# Default search strategy: semantic, traversal, or hybrid
RYUMEM_SEARCH_DEFAULT_STRATEGY=hybrid

# Maximum depth for graph traversal in search
RYUMEM_SEARCH_MAX_TRAVERSAL_DEPTH=2

# RRF constant for hybrid search ranking (Reciprocal Rank Fusion)
RYUMEM_SEARCH_RRF_K=60

# Minimum RRF score threshold for results
RYUMEM_SEARCH_MIN_RRF_SCORE=0.025

# Minimum BM25 score threshold for keyword search
RYUMEM_SEARCH_MIN_BM25_SCORE=0.1

# =============================================================================
# Community Detection Configuration
# =============================================================================

# Enable automatic community detection
RYUMEM_COMMUNITY_ENABLED=true

# Minimum number of entities before running community detection
RYUMEM_COMMUNITY_DETECTION_THRESHOLD=10

# =============================================================================
# Tool Tracking Configuration (for Google ADK integration)
# =============================================================================

# Enable tool call tracking
RYUMEM_TOOL_TRACKING_TRACK_TOOLS=true

# Enable query tracking
RYUMEM_TOOL_TRACKING_TRACK_QUERIES=true

# Enable query augmentation with similar past queries
RYUMEM_TOOL_TRACKING_AUGMENT_QUERIES=true

# Similarity threshold for query augmentation (0.0-1.0)
RYUMEM_TOOL_TRACKING_SIMILARITY_THRESHOLD=0.3

# Number of similar queries to include in augmentation
RYUMEM_TOOL_TRACKING_TOP_K_SIMILAR=5

# =============================================================================
# Server Configuration (for FastAPI server)
# =============================================================================

# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# Server log level
LOG_LEVEL=INFO